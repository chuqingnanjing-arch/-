<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>男友相机 - 姿势引导</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #camera-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; background: #000; }
        video { width: 100%; height: 100%; object-fit: cover; }
        /* 这里的姿势图片层 */
        #pose-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%; /* 轮廓大小 */
            opacity: 0.6; /* 透明度 */
            pointer-events: none; /* 不挡住点击事件 */
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.8));
        }
        .controls { position: absolute; bottom: 30px; left: 0; right: 0; display: flex; justify-content: space-around; align-items: center; padding: 0 20px; }
        .shutter { width: 70px; height: 70px; background: white; border-radius: 50%; border: 5px solid rgba(0,0,0,0.2); }
    </style>
</head>
<body>

<div id="camera-container">
    <!-- 1. 摄像头视频流 -->
    <video id="video" autoplay playsinline></video>

    <!-- 2. 姿势轮廓叠加层 (这里换成不同的SVG或PNG) -->
    <img id="pose-overlay" src="https://svgshare.com/i/15mX.svg" alt="姿势轮廓">

    <!-- 3. UI 控制区 -->
    <div class="controls">
        <button onclick="prevPose()" class="bg-black/50 text-white p-3 rounded-full">上一个</button>
        <div class="shutter" onclick="takePhoto()"></div>
        <button onclick="nextPose()" class="bg-black/50 text-white p-3 rounded-full">下一个</button>
    </div>
    
    <!-- 提示文案 -->
    <div id="tip" class="absolute top-10 left-0 right-0 text-center text-white text-sm bg-black/30 py-2">
        请让女生对准白色轮廓
    </div>
</div>

<script>
    const video = document.getElementById('video');
    const poseImg = document.getElementById('pose-overlay');
    const tip = document.getElementById('tip');

    // 这里定义不同的姿势轮廓图 (建议使用透明背景的PNG或白色线条SVG)
    const poses = [
        { name: "全身-街拍", url: "https://svgshare.com/i/15mX.svg", tip: "侧身站立，一只脚向前伸" },
        { name: "坐姿-咖啡厅", url: "https://svgshare.com/i/15mY.svg", tip: "双手托腮，身体微微前倾" },
        { name: "半身-回眸", url: "https://svgshare.com/i/15mZ.svg", tip: "背对镜头，侧头微笑" }
    ];
    let currentPose = 0;

    // 启动摄像头
    async function startCamera() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ 
                video: { facingMode: "environment" }, // 强制使用后置摄像头
                audio: false 
            });
            video.srcObject = stream;
        } catch (err) {
            alert("无法打开摄像头，请确保授予了权限并使用HTTPS访问");
        }
    }

    function nextPose() {
        currentPose = (currentPose + 1) % poses.length;
        updateUI();
    }

    function prevPose() {
        currentPose = (currentPose - 1 + poses.length) % poses.length;
        updateUI();
    }

    function updateUI() {
        poseImg.src = poses[currentPose].url;
        tip.innerText = poses[currentPose].tip;
    }

    function takePhoto() {
        // 这里可以扩展成真正的拍照保存逻辑
        alert("咔嚓！(提示：Web版由于权限限制，建议直接按手机电源键+音量键截图，效果最快！)");
    }

    window.onload = startCamera;
</script>

</body>
</html>
